#!/usr/bin/env ruby

$LOAD_PATH << File.expand_path("../../lib", __FILE__)

require "taskmeister"

def read_lines(path)
  File.exist?(path) ? File.readlines(path) : []
end

def write_file(path, content)
  File.open(path, "w") do |f|
    f.write content
  end
end

options = Taskmeister::CommandOptions.parse(ARGV)

task_list_name = options.list || Taskmeister::ProjectDirectory.list_name_for(Pathname.getwd)

unless task_list_name
  puts "Could not find a project directory. Please specify a task list."
  exit(1)
end

task_list_path = Pathname.new(options.task_dir) + task_list_name

task_list = Taskmeister::TaskList.from_lines(
  read_lines(task_list_path)
)

case options.command
when "list"
  puts task_list.short_list
when "done"
  puts "You want me to done"
when "replace"
  puts "You want me to replace"
when "edit"
  puts "You want me to edit"
when "show"
  puts "You want me to show"
end
